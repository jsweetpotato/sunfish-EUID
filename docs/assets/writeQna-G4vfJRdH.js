import"./tailwind-FG0q2sUH.js";import{g as i}from"./index-LZz_RBWS.js";import{g as a,a as d}from"./getNode-pa7syr6m.js";import{p as m}from"./delay-L14dHocY.js";import{c as h}from"./checkAuth-CTdHH8Oq.js";import{b as v,a as b}from"./Modal-LwrVZ11o.js";(function(){if(!h())return;a("#form").addEventListener("submit",t=>t.preventDefault())})();const l={type:"qna",title:"",description:"",category:"프론트엔드",imgField:[],views:0,comments:JSON.stringify([]),user:m.authStore.model.id},p=a("#category-select"),E=a("#closeModal"),L=a("#modalDimmed");function y(){i.timeline().to("#modalDimmed",{opacity:1,display:"block",duration:.3}).to("#modal",{bottom:0,duration:.3,onComplete(){this.targets()[0].focus()}},"<")}function u(e){this===e.target&&i.to("#modalDimmed",{opacity:0,duration:.3,onComplete(){i.set("#modalDimmed",{clearProps:"all"}),i.set("#modal",{clearProps:"all"})}})}p.addEventListener("click",y);E.addEventListener("click",u);L.addEventListener("click",u);const k=d(".select");k.forEach(e=>{e.addEventListener("click",n=>{const{id:t,dataset:o}=n.target;p.textContent=o.name,l.category=t,i.to("#modalDimmed",{opacity:0,duration:.1,onComplete(){i.set("#modalDimmed",{clearProps:"all"}),i.set("#modal",{clearProps:"all"})}})})});const r={title:!1,description:!1},w=d(".input");function D({target:e}){const n=a("#complete");r[e.id]=e.value.length>0,l[e.id]=e.value,Object.values(r).every(t=>t)?n.removeAttribute("disabled"):n.setAttribute("disabled","")}w.forEach(e=>{e.addEventListener("input",D)});const f=a("#file");function M({target:e}){if(e.value==="")return;const{files:n}=e,t=a("#image-wrapper");t.innerHTML="",t.parentElement.classList.remove("hidden"),i.from(t.parentElement,{y:70}),[...n].forEach(o=>{l.imgField.push(o);const c=URL.createObjectURL(o);t.insertAdjacentHTML("beforeend",`<img class="w-16 h-16" src="${c}" alt="" />`)})}f.addEventListener("change",M);const C=a("#file-clear");function B({target:e}){const n=a("#image-wrapper");f.value="",l.imgField=[],n.innerHTML="",n.parentElement.classList.add("hidden")}C.addEventListener("click",B);const F=a("#complete");function A(){const[e]=v("작성이 완료되었습니다.");return async n=>{if(e.showing(),!Object.values(r).every(o=>o))return;const t=new FormData;for(const[o,c]of Object.entries(l))o==="imgField"?l[o].forEach(s=>t.append("imgField",s)):t.append(o,c);try{await m.collection("qAndA").create(t),window.location.replace("/src/pages/board/qna.html")}catch{alert("알 수 없는 오류가 발생했습니다. 다시 시도해주세요.")}}}F.addEventListener("click",A());function j(){const e="❗ 정말 취소하시겠어요?",n="입력한 내용은 모두 사라집니다.<br />계속하시겠습니까?",t="아니오",o="예",[c,s,g]=b({title:e,desc:n,cancelText:t,goBackText:o});return s.addEventListener("click",()=>{c.closing()}),g.addEventListener("click",()=>{window.location.replace("/src/pages/board/qna.html")}),()=>{c.showing()}}const O=d(".cancel");O.forEach(e=>e.addEventListener("click",j()));
