import"./tailwind-GolohDhN.js";import{C as x}from"./delay-YOOEtQ5Y.js";import{g as n,a as b}from"./getNode-pa7syr6m.js";import{g as w}from"./getPbImageUrl-DQjhCXIR.js";import{c as d}from"./checkAuth-1jN6PZSr.js";const o=new x("https://suppose-weather.pockethost.io/"),k=n("#prev"),l=new URL(window.location.href).searchParams.get("id"),t=n("#contentName"),C=n("#finish"),y=n("#checkBox"),u=await o.collection("selling").getOne(l);async function E(){if(!d())return;const i=n("#previewImg"),r=n("#productTitle"),s=n("#letterCount"),a=b("#tradeMethod > button"),g=n("#descriptionCount"),h=n("#description"),{description:m,title:c,tradingType:f,isPriceOffer:v}=u;s.textContent=c.length+"/24",g.textContent=c.length+"/500",f==="sell"?(a[0].style.backgroundColor="#373F67",a[0].style.color="white"):(a[1].style.backgroundColor="#373F67",a[1].style.color="white"),v===!0&&(y.checked=!0),i.src=w(u,"productImages"),r.value=c,h.value=m}let e=null;const p=n("#spell");function L({target:i}){if(!d())return;const{value:r}=i;/^[0-9]*$/.test(r)?(t.value=t.value.replace(/[^0-9]/g,""),e&&(e.remove(),e=null),t.value.length>12&&(t.value=t.value.slice(0,12),e=document.createElement("span"),e.textContent="숫자는 12이하로 입력해주세요",e.classList.add("text-label-sm","text-red-500","text-right","block"),p.insertAdjacentElement("afterbegin",e))):e||(e=document.createElement("span"),e.classList.add("text-label-sm","text-red-500","text-right","block"),e.textContent="숫자만 입력해주세요",p.insertAdjacentElement("afterbegin",e))}async function N(i){if(!d()||!o||!o.authStore||!o.authStore.model)return;const r={price:Number(i),user:o.authStore.model.id};try{await o.collection("selling").update(l,r),window.location.href=`/src/pages/exchange/exchangeDetail.html?id=${l}`}catch{}}t.addEventListener("input",L);k.addEventListener("click",()=>history.back());C.addEventListener("click",()=>{parseInt(t.value.length)>12||t.value[0]==="0"||isNaN(t.value)||t.value===""||N(t.value)});E();
